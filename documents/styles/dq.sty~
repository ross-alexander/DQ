%% This is linuxdoc-qwertz.sty, for use with SGML-generated LaTeX
%% by Matt Welsh (mdw@sunsite.unc.edu)
%%
%% Based on linuxdoc.sty by Michael K. Johnson, and latex.tex by 
%% Leslie Lamport. 

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{dq}[1998/03/29 v0.2 DQ style file]

\ifx\pdfpageheight\@undefined
   \RequirePackage{epsfig}
\else
  \RequirePackage[pdftex]{epsfig}
\fi
\RequirePackage[T1]{fontenc}

\RequirePackage{ifthen}
\RequirePackage{mathptm}
\RequirePackage{multicol}
\RequirePackage{tabularx}
\RequirePackage{array}
\RequirePackage{fancyhdr}

\typeout{DQ Rules style sheet, version 0.1 <7 Aug 96>}

\DeclareOption{times}{
\renewcommand{\rmdefault}{ptm}
\renewcommand{\sfdefault}{phv}
\renewcommand{\scriptsize}{\fontencoding{T1}\fontfamily{\rmdefault}\fontsize{6}{7pt}\selectfont}
\renewcommand{\small}{\fontencoding{T1}\fontfamily{\rmdefault}\fontsize{7}{8pt}\selectfont}
\renewcommand{\normalsize}{\fontencoding{T1}\fontfamily{\rmdefault}\fontsize{8}{9.5pt}\selectfont}
\renewcommand{\large}{\fontencoding{T1}\fontfamily{\sfdefault}\fontsize{9}{11pt}\selectfont}
\renewcommand{\Large}{\fontencoding{T1}\fontfamily{\sfdefault}\fontsize{12}{15pt}\selectfont}
\renewcommand{\huge}{\fontencoding{T1}\fontfamily{\sfdefault}\fontsize{18}{20pt}\selectfont}
}

%%% FONT THINGS

\renewcommand{\encodingdefault}{T1}

\renewcommand{\rmdefault}{pnc}
\renewcommand{\sfdefault}{pag}
\renewcommand{\ttdefault}{pcr}

\renewcommand{\scriptsize}{\fontencoding{T1}\fontfamily{\rmdefault}\fontsize{6}{7pt}\selectfont}
\renewcommand{\small}{\fontencoding{T1}\fontfamily{\rmdefault}\fontsize{7}{8pt}\selectfont}
\renewcommand{\normalsize}{\fontencoding{T1}\fontfamily{\rmdefault}\fontsize{8}{9.5pt}\selectfont}
\renewcommand{\large}{\fontencoding{T1}\fontfamily{\sfdefault}\fontsize{10}{11pt}\selectfont}
\renewcommand{\Large}{\fontencoding{T1}\fontfamily{\sfdefault}\fontsize{14}{15pt}\selectfont}
\renewcommand{\huge}{\fontencoding{T1}\fontfamily{\sfdefault}\fontsize{18}{20pt}\selectfont}

\ProcessOptions

%%% GLOBAL LAYOUT THINGS

\setlength\marginparwidth{0.0 in}
\setlength\parindent{0.0 in}
\setlength\topmargin{-0.75 in}
\setlength\textheight{10.65 in}

\addtolength{\parskip}{0.3 em}
\setlength\headsep{5pt}

\setlength\leftmargini{1.5em}
\setlength\leftmarginii{2.0em}

\let\ps@plain\ps@empty

\setcounter{secnumdepth}{2}
\setcounter{tocdepth}{1}

\setcounter{columnbadness}{1000}
\setcounter{finalcolumnbadness}{1000}
\setcounter{collectmore}{8}

\renewcommand{\section}{\@startsection
	{section}%
	{1}%
	{\z@}%
	{10.0pt}
	{0.2pt}
	{\reset@font\Large\bfseries}}%

\renewcommand{\subsection}{\@startsection
	{subsection}%
	{2}%
	{\z@}%
	{1.0\parskip plus4pt}
	{0.25\baselineskip}
	{\reset@font\large\bfseries}}%

\renewcommand{\subsubsection}{\@startsection
	{subsubsection}%
	{3}%
	{\z@}%
	{4ptminus2pt}
	{0.25\baselineskip}
	{\reset@font\normalfont\bfseries}}%

%%% ONE-SIDED/TWO-SIDED DEPENDENCIES

\if@twoside % ``book'' style was chosen
 \oddsidemargin -10.0 mm
 \evensidemargin -15.0 mm
 \textwidth 7.3 in
\else % if not book style, then
 \oddsidemargin -0.25 in
 \evensidemargin\oddsidemargin
 \textwidth 7.2 in
\fi

%\pagestyle{headings}

\newcommand{\thisday}{\slshape\fontsize{8}{9pt}\selectfont{\MakeUppercase{\today}}}
\pagestyle{fancyplain}
\lhead[\fancyplain{}{\slshape\fontsize{8}{9pt}\selectfont\rightmark}]{\fancyplain{}{\thisday}}
\rhead[\fancyplain{}{\thisday}]{\fancyplain{}{\slshape\fontsize{8}{9pt}\selectfont\rightmark}}
\cfoot{\fancyplain{}{\fontsize{8}{9pt}\selectfont\thepage}}
\renewcommand\headrulewidth{0.0pt}
\renewcommand\footrulewidth{0.0pt}
\renewcommand\footruleskip{0.0pt}


%%% USEFUL MACROS


%  \@removefromreset{FOO}{BAR} : Removes counter FOO from the list of 
%                       counters \cl@BAR to be reset when counter BAR
%                       is stepped.  The opposite of \@addtoreset.

\def\@removefromreset#1#2{\let\@tempb\@elt 
   \expandafter\let\expandafter\@tempa\csname c@#1\endcsname
   \def\@elt##1{\expandafter\ifx\csname c@##1\endcsname\@tempa\else
         \noexpand\@elt{##1}\fi}%
   \expandafter\edef\csname cl@#2\endcsname{\csname cl@#2\endcsname}%
   \let\@elt\@tempb}

\renewcommand\thesection{\arabic{section}}
\@removefromreset{section}{chapter}


\renewcommand{\@makefnmark}{\scriptsize{\mbox{$^{\@thefnmark}$}}}

\newcommand{\x}{$\times$\ }
\newcommand{\eg}{e.g.\ }
\newcommand{\ie}{i.e.\ }

\newenvironment{talent}[2][]{\ifthenelse{\equal{#1}{\empty}}{\subsubsection{#2}}{\subsubsection{#2 (#1)}}\index{talents!#2}}{}
\newenvironment{spell}[2][]{\ifthenelse{\equal{#1}{\empty}}{\subsubsection{#2}}{\subsubsection{#2 (#1)}}\index{spells!#2}}{}
\newenvironment{ritual}[2][]{\ifthenelse{\equal{#1}{\empty}}{\subsubsection{#2}}{\subsubsection{#2 (#1)}}\index{rituals!#2}}{}

\newenvironment{example}[0]{\small \textbf{Example}\hspace{1.2em}}{}
\newcommand{\clearemptydoublepage}{\newpage{\pagestyle{empty}\cleardoublepage}}
\newcommand{\sItem}[2]{\emph{#1}: #2 \\}

\newenvironment{Itemize}[0]{\begin{itemize}\setlength\itemsep{0pt}}{\end{itemize}}
\newenvironment{Enumerate}[0]{\begin{enumerate}\setlength\itemsep{0pt}}{\end{enumerate}}
\newenvironment{Description}[0]{\setlength\leftmargini{0pt}\begin{description}\setlength\itemsep{0pt}}{\end{description}}

\ifx\pdfpageheight\@undefined
   \typeout{Using DVI driver}
\else
  \typeout{Using PDF driver}
  \renewcommand{\rmdefault}{ptm}
  \renewcommand{\sfdefault}{phv}
  \renewcommand{\ttdefault}{pcr}
  \pdfpageheight\paperheight
  \pdfpagewidth\paperwidth
  \pdfoutput=1\relax			% turn on PDF output; otherwise output DVI file
					% this primitive can not be specified  *after* shipping
					% out the *first* page
  \renewcommand{\thisday}{\fontsize{8}{9pt}\selectfont{\MakeUppercase{\today}}}
  \lhead[\fancyplain{}{\fontsize{8}{9pt}\selectfont\rightmark}]{\fancyplain{}{\thisday}}
  \rhead[\fancyplain{}{\thisday}]{\fancyplain{}{\fontsize{8}{9pt}\selectfont\rightmark}}
  \cfoot{\fancyplain{}{\fontsize{8}{9pt}\selectfont\thepage}}
\fi

% New environment stuff added to reduce formatting in actual file
\newenvironment{contributors}[0]{\begin{center}{\Large \textbf{Contributors}}\end{center}\begin{multicols}{4}}{\end{multicols}}
\newenvironment{edition}[1]{\begin{center}\Large \textbf{History of Edition #1}\end{center}\begin{multicols}{3}}{\end{multicols}}

\newenvironment{college}[3]{\section{The College of #1 (Ver #2)}\label{college:#3}\def\dq@college{#1} \index{colleges!\dq@college|(} \begin{multicols*}{3}}%
{\end{multicols*}\index{colleges!\dq@college|)} \clearemptydoublepage}

\newcommand{\range}[1]{\sItem{Range}{#1}}
\newcommand{\multiple}[1]{\sItem{Experience Multiple}{#1}}
\newcommand{\basechance}[1]{\sItem{Base Chance}{#1}}
\newcommand{\duration}[1]{\sItem{Duration}{#1}}
\newcommand{\resist}[1]{\sItem{Resist}{#1}}
\newcommand{\target}[1]{\sItem{Target}{#1}}
\newcommand{\storage}[1]{\sItem{Storage}{#1}}
\newcommand{\material}[1]{\sItem{Material}{#1}}
\newcommand{\casttime}[1]{\sItem{Cast Time}{#1}}
\newcommand{\actions}[1]{\sItem{Actions}{#1}}
\newcommand{\concentration}[1]{\sItem{Concentration Check}{#1}}
\newcommand{\materialcost}[1]{\sItem{Material Cost}{#1}}
\newcommand{\basetime}[1]{\sItem{Base Construction Time}{#1}}

\newenvironment{effects}[0]{\emph{Effects: }}{}

\setlength{\@fptop}{0pt}\setlength{\@fpsep}{8pt}

\newenvironment{skill}[3]%
{\begin{multicols*}{3} \ifthenelse{\equal{#2}{\empty}}{\section{#1}}{\section{#1 (Ver #2)}}\def\dq@skill{#1}\label{#3}\index{\dq@skill|(} \index{skills!\dq@skill|(}}%
{\index{\dq@skill|)}\index{skills!\dq@skill|)}\end{multicols*} \newpage}
